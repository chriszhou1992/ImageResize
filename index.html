<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title></title>
  
  <script src="gradient.js"></script>
  <script src="seam-carving.js"></script>
</head>

<body>
  <div>
	<img id="img" src="wave.png"/>
  </div>
  
  <div>
	<canvas id="canvas"></canvas>
  </div>
  
  <script>
    window.onload = function() {
	  var img = new Image();
	  var loadedImg = document.getElementById('img');
	  
	  img.src = loadedImg.src;
	  console.log("%o", img);
	  
	  //var canvas = document.createElement('canvas');
	  var canvas = document.getElementById('canvas');
	  canvas.width = img.width;
	  canvas.height = img.height;
	  
	  var ctx = canvas.getContext('2d');
	  
	  ctx.drawImage(img, 0, 0, img.width, img.height);
	  console.log(img.width, img.height);
	  
	  
	  var imgData = ctx.getImageData(0, 0, img.width, img.height);
	  gradients = computeGradient(imgData.data, img.width, img.height);
	  drawGradient(ctx, img.width, img.height, gradients);
	  
	  newPixels = removeVerticalSeams(100, img.width, img.height, imgData.data);
	  canvas.width = img.width - 100;
	  ctx = canvas.getContext('2d');
	  imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);
	  console.log("%o", newPixels.length);
	  console.log("%o", imgData);
	  imgData.data.set(newPixels);
	  ctx.putImageData(imgData, 0, 0);
	  
	  //seamEnergy = computeVerticalSeams(gradients, img.width, img.height);
	  
	  //drawVerticalSeams(ctx, img.width, img.height, seamEnergy);
	}
  </script>
</body>

</html>